<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.geekzu.org/css?family=Noto+Serif+SC:300,300italic,400,400italic,700,700italic%7CLobster+Two:300,300italic,400,400italic,700,700italic%7CSource+Code+Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"weijun-lin.top","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.17.1","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":true,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="书本配套答案  Github：笔记-计算机网络自顶向下 第6版">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络自顶向下 第6版 阅读笔记">
<meta property="og:url" content="https://weijun-lin.top/2020/03/02/2020-03-02-Compute-Networking-A-Top-Down-Approach-6th/index.html">
<meta property="og:site_name" content="Wei-Jun Lin&#39;s Blog">
<meta property="og:description" content="书本配套答案  Github：笔记-计算机网络自顶向下 第6版">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_7.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_9.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_10.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_11.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_12.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_13.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_14.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_15.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_19.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_22.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_23.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_27.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/T3_1.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_29.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_31.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_39.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_40.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_52.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_56.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_6.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_8.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_11.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_12.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_13.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/T4_2.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_17.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_21.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_24.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_25.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_26.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/LS.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/T4_3.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_28.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_29.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/DV.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_30.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_34.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_35.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_36.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_37.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_38.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/BGP_routing.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_2.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_5.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_10.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_12.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_13.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_18.png">
<meta property="og:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_20.png">
<meta property="article:published_time" content="2020-03-01T16:00:00.000Z">
<meta property="article:modified_time" content="2020-12-31T13:16:51.199Z">
<meta property="article:author" content="Wei-Jun Lin">
<meta property="article:tag" content="Computer Network">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://weijun-lin.top/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_7.png">


<link rel="canonical" href="https://weijun-lin.top/2020/03/02/2020-03-02-Compute-Networking-A-Top-Down-Approach-6th/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://weijun-lin.top/2020/03/02/2020-03-02-Compute-Networking-A-Top-Down-Approach-6th/","path":"2020/03/02/2020-03-02-Compute-Networking-A-Top-Down-Approach-6th/","title":"计算机网络自顶向下 第6版 阅读笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>计算机网络自顶向下 第6版 阅读笔记 | Wei-Jun Lin's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Wei-Jun Lin's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">学习 · 分享</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E5%9B%A0%E7%89%B9%E7%BD%91"><span class="nav-text">Chapter 1 计算机网络和因特网</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E8%BE%B9%E7%BC%98"><span class="nav-text">1. 网络边缘</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%89%A9%E7%90%86%E5%AA%92%E4%BB%8B"><span class="nav-text">物理媒介</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E6%A0%B8%E5%BF%83"><span class="nav-text">*2. 网络核心</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#i.-packet-switching-%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="nav-text">i. Packet Switching 分组交换</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#a.-store-and-forward-transmission-%E5%AD%98%E5%82%A8%E8%BD%AC%E5%8F%91%E4%BC%A0%E8%BE%93"><span class="nav-text">a.
Store-and-Forward Transmission 存储转发传输</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#b.-queuing-delays-and-packet-loss"><span class="nav-text">b. Queuing Delays and Packet
Loss</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#c.-forwarding-tables-and-routing-protocols"><span class="nav-text">c. Forwarding Tables
and Routing Protocols</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ii.-circuit-switching-%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="nav-text">ii. Circuit Switching
电路交换</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#multiplexing-in-circuit-switched-networks"><span class="nav-text">Multiplexing in
Circuit-Switched Networks</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iii.-packet-switching-versus-circuit-switching"><span class="nav-text">iii. Packet
Switching Versus Circuit Switching</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#packet-switching"><span class="nav-text">Packet Switching</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#circuit-switching"><span class="nav-text">Circuit Switching</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iv.-a-network-of-networks"><span class="nav-text">IV. A Network of Networks</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#delay-loss-and-throughput"><span class="nav-text">3. *Delay, Loss, and Throughput</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#types-of-delay"><span class="nav-text">Types Of Delay</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#queuing-delay-and-packet-loss"><span class="nav-text">Queuing Delay and Packet
Loss</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#end-to-end-delay"><span class="nav-text">End-to-End Delay</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#throughput-in-computer-networks"><span class="nav-text">Throughput in Computer
Networks</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#protocol-layers-and-their-service-models"><span class="nav-text">4. Protocol Layers and
Their Service Models</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#layered-architecture"><span class="nav-text">Layered Architecture</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#encapsulation"><span class="nav-text">Encapsulation</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-2-application-layer"><span class="nav-text">Chapter 2 Application Layer</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#principles-of-network-applications"><span class="nav-text">1. Principles of Network
Applications</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#i.-network-application-architectures"><span class="nav-text">i. Network Application
Architectures</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ii.-processes-communicating"><span class="nav-text">ii. Processes Communicating</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iii.-transport-services-available-to-applications"><span class="nav-text">iii.
Transport Services Available to Applications</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iv.-transport-services-provided-by-the-internet"><span class="nav-text">IV. Transport
Services Provided by the Internet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v.-services-not-provided-by-internet-transport-protocols"><span class="nav-text">V.
Services Not Provided by Internet Transport Protocols</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#the-web-and-http"><span class="nav-text">*2. The Web and HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#i.-overview-of-http"><span class="nav-text">i. Overview of HTTP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ii.-non-persistent-and-persistent-connections"><span class="nav-text">ii.
Non-Persistent and Persistent Connections</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iii.-http-message-format"><span class="nav-text">iii. HTTP Message Format</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iv.-user-server-interaction-cookies"><span class="nav-text">iv. User-Server
Interaction: Cookies</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v.-web-caching"><span class="nav-text">V. Web Caching</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#vi.-the-conditional-get"><span class="nav-text">VI. The Conditional GET</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dnsthe-internets-directory-service"><span class="nav-text">5. DNS—The Internet’s
Directory Service</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#i.-services-provided-by-dns"><span class="nav-text">i. Services Provided by DNS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ii.-overview-of-how-dns-works"><span class="nav-text">ii. Overview of How DNS
Works</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iv.-dns-records-and-messages"><span class="nav-text">iv. DNS Records and Messages</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="nav-text">电子邮件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#smtp%E4%BF%9D%E5%AD%98%E7%8A%B6%E6%80%81"><span class="nav-text">SMTP(保存状态)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pop3"><span class="nav-text">POP3</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#imap%E4%BF%9D%E5%AD%98%E7%8A%B6%E6%80%81"><span class="nav-text">IMAP（保存状态）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ftp%E4%BF%9D%E5%AD%98%E7%8A%B6%E6%80%81"><span class="nav-text">FTP（保存状态）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-3-transport-layer"><span class="nav-text">Chapter 3 Transport Layer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#relationship-between-transport-and-network-layers"><span class="nav-text">Relationship
Between Transport and Network Layers</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#overview-of-the-transport-layer-in-the-internet"><span class="nav-text">Overview of the
Transport Layer in the Internet</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#multiplexing-and-demultiplexing"><span class="nav-text">3.2 Multiplexing and
Demultiplexing</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#connectionless-multiplexing-and-demultiplexing"><span class="nav-text">Connectionless
Multiplexing and Demultiplexing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#connection-oriented-multiplexing-and-demultiplexing"><span class="nav-text">Connection-Oriented
Multiplexing and Demultiplexing</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#connectionless-transport-udp"><span class="nav-text">3.3 Connectionless Transport:
UDP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#udp-segment-structure"><span class="nav-text">UDP Segment Structure</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#udp-checksum"><span class="nav-text">UDP Checksum</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#principles-of-reliable-data-transfer"><span class="nav-text">3.4 Principles of Reliable
Data Transfer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#building-a-reliable-data-transfer-protocol"><span class="nav-text">Building a Reliable
Data Transfer Protocol</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pipelined-reliable-data-transfer-protocols"><span class="nav-text">Pipelined Reliable
Data Transfer Protocols</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#connection-oriented-transport-tcp"><span class="nav-text">3.5 Connection-Oriented
Transport: TCP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#the-tcp-connection"><span class="nav-text">The TCP Connection</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tcp-segment-structure"><span class="nav-text">TCP Segment Structure</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#round-trip-time-estimation-and-timeout"><span class="nav-text">Round-Trip Time
Estimation and Timeout</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reliable-data-transfer"><span class="nav-text">Reliable Data Transfer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#flow-control"><span class="nav-text">Flow Control</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tcp-connection-management"><span class="nav-text">TCP Connection Management</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tcp-congestion-control"><span class="nav-text">3.7 TCP Congestion Control</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-4-the-network-layer"><span class="nav-text">Chapter 4 The Network Layer</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#introduction"><span class="nav-text">4.1 Introduction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#virtual-circuit-and-datagram-networks"><span class="nav-text">4.2 Virtual Circuit and
Datagram Networks</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#virtual-circuit-networks"><span class="nav-text">Virtual-Circuit Networks</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#datagram-networks"><span class="nav-text">Datagram Networks</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#whats-inside-a-router"><span class="nav-text">4.3 What’s Inside a Router?</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#architecture"><span class="nav-text">Architecture</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#switching"><span class="nav-text">Switching</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#where-does-queueing-occur"><span class="nav-text">Where Does Queueing Occur?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#the-routing-control-plane"><span class="nav-text">The Routing Control Plane</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ip"><span class="nav-text">4.4 IP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#datagram-format"><span class="nav-text">Datagram Format</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ipv4-addressing"><span class="nav-text">IPv4 Addressing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dhcp-the-dynamic-host-configuration-protocol"><span class="nav-text">DHCP: the Dynamic
Host Configuration Protocol</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#network-address-translation-nat"><span class="nav-text">Network Address Translation
(NAT)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#internet-control-message-protocol-icmp"><span class="nav-text">Internet Control Message
Protocol (ICMP)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ipv6"><span class="nav-text">IPv6</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#routing-algorithms"><span class="nav-text">4.5 Routing Algorithms</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#link-state-algorithm-ls"><span class="nav-text">Link-State Algorithm (LS)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#the-distance-vector-dv-routing-algorithm"><span class="nav-text">The Distance-Vector
(DV) Routing Algorithm</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#distance-vector-algorithm-adding-poisoned-reverse"><span class="nav-text">Distance-Vector
Algorithm: Adding Poisoned Reverse</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#a-comparison-of-ls-and-dv-routing-algorithms"><span class="nav-text">A Comparison of LS
and DV Routing Algorithms</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hierarchical-routing"><span class="nav-text">Hierarchical Routing</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#routing-in-the-internet"><span class="nav-text">4.6 Routing in the Internet</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#intra-as-routing-in-the-internet-rip"><span class="nav-text">Intra-AS Routing in the
Internet: RIP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#intra-as-routing-in-the-internet-ospf"><span class="nav-text">Intra-AS Routing in the
Internet: OSPF</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#inter-as-routing-bgpborder-gateway-protocol"><span class="nav-text">Inter-AS Routing:
BGP（Border Gateway Protocol）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-5-the-link-layer-links-access-networks-and-lans"><span class="nav-text">Chapter
5 The Link Layer: Links, Access Networks, and LANs</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#introduction-to-the-link-layer"><span class="nav-text">5.1 Introduction to the Link
Layer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#the-services-provided-by-the-link-layer"><span class="nav-text">The Services Provided
by the Link Layer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#where-is-the-link-layer-implemented"><span class="nav-text">Where Is the Link Layer
Implemented?</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#error-detection-and--correction-techniques"><span class="nav-text">5.2 Error-Detection
and -Correction Techniques</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#parity-checks"><span class="nav-text">Parity Checks</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#checksumming-methods"><span class="nav-text">Checksumming Methods</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cyclic-redundancy-check-crc"><span class="nav-text">Cyclic Redundancy Check (CRC)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#multiple-access-links-and-protocols"><span class="nav-text">5.3 Multiple Access Links
and Protocols</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#channel-partitioning-protocols"><span class="nav-text">Channel Partitioning
Protocols</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#random-access-protocols"><span class="nav-text">Random Access Protocols</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#taking-turns-protocols"><span class="nav-text">Taking-Turns Protocols</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#switched-local-area-networks"><span class="nav-text">5.4 Switched Local Area
Networks</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#link-layer-addressing-and-arp"><span class="nav-text">Link-Layer Addressing and
ARP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ethernet"><span class="nav-text">Ethernet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#link-layer-switches"><span class="nav-text">Link-Layer Switches</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Wei-Jun Lin"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Wei-Jun Lin</p>
  <div class="site-description" itemprop="description">君子可内敛不可懦弱<br>面不公可起而论之</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">47</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">46</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/weijun-lin" title="Github → https:&#x2F;&#x2F;github.com&#x2F;weijun-lin" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>Github</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/joker-88-62-57/activities" title="ZHIHU → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;joker-88-62-57&#x2F;activities" rel="noopener me" target="_blank"><i class="fab fa-zhihu fa-fw"></i>ZHIHU</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:weijun-lin@foxmail.com" title="E-Mail → mailto:weijun-lin@foxmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://lestertan.ink/" title="https:&#x2F;&#x2F;lestertan.ink" rel="noopener" target="_blank">Lester</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://blog.scubot.com/" title="https:&#x2F;&#x2F;blog.scubot.com&#x2F;" rel="noopener" target="_blank">CarOL</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://colin-jay.cn/" title="https:&#x2F;&#x2F;colin-jay.cn&#x2F;" rel="noopener" target="_blank">Colin Jay</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://yez-liu.github.io/" title="https:&#x2F;&#x2F;yez-liu.github.io&#x2F;" rel="noopener" target="_blank">yez-liu</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://weijun-lin.top/2020/03/02/2020-03-02-Compute-Networking-A-Top-Down-Approach-6th/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Wei-Jun Lin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wei-Jun Lin's Blog">
      <meta itemprop="description" content="君子可内敛不可懦弱<br>面不公可起而论之">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="计算机网络自顶向下 第6版 阅读笔记 | Wei-Jun Lin's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          计算机网络自顶向下 第6版 阅读笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-02 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-02T00:00:00+08:00">2020-03-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer-Science/" itemprop="url" rel="index"><span itemprop="name">Computer Science</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer-Science/Note/" itemprop="url" rel="index"><span itemprop="name">Note</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>34 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p><a
target="_blank" rel="noopener" href="https://github.com/Troy922/Computer-Network/blob/master/计算机网络自顶向下方法答案(英文第六版).pdf">书本配套答案</a></p>
<blockquote>
<p>Github：<a
target="_blank" rel="noopener" href="https://github.com/Weijun-Lin/Notes/tree/master/Compute-Networking-A-Top-Down-Approach-6th">笔记-计算机网络自顶向下
第6版</a></p>
</blockquote>
<span id="more"></span>
<h2 id="chapter-1-计算机网络和因特网">Chapter 1 计算机网络和因特网</h2>
<h3 id="网络边缘">1. 网络边缘</h3>
<h4 id="物理媒介">物理媒介</h4>
<p>分为两类：导引型（guided media），非导引型（unguided media）</p>
<ul>
<li>双绞铜线（Twisted-Pair Copper Wire）</li>
<li>同轴电缆（Coaxial Cable）</li>
<li>光纤（Fiber Optics）</li>
<li>陆地无线电信道（Terrestrial Radio Channels）</li>
<li>卫星无线电信道（Satellite Radio Channel）</li>
</ul>
<h3 id="网络核心">*2. 网络核心</h3>
<blockquote>
<p>the mesh of packet switches and links that interconnects the
Internet’s end systems</p>
</blockquote>
<h4 id="i.-packet-switching-分组交换">i. Packet Switching 分组交换</h4>
<blockquote>
<p>breaks <strong>long messages</strong> into smaller chunks of data
known as <strong>packets</strong>. Between source and destination, each
packet travels through <strong>communication links</strong> and
<strong>packet switches</strong> (for which there are two predominant
types, routers and linklayer switches)</p>
<p>Packets are transmitted over each communication link at a rate equal
to the <strong>full transmission rate of the link.</strong></p>
</blockquote>
<h5 id="a.-store-and-forward-transmission-存储转发传输">a.
Store-and-Forward Transmission 存储转发传输</h5>
<p>Store-and-forward transmission means that the packet switch
<strong>must receive the entire packet before it can begin to transmit
the first bit of the packet</strong> onto the outbound link.</p>
<p>P个分组经过N条链路，每一个分组大小是L，速率为R</p>
<p>端到端的时延是：<span
class="math inline">\((N+P-1)\frac{L}{R}\)</span></p>
<h5 id="b.-queuing-delays-and-packet-loss">b. Queuing Delays and Packet
Loss</h5>
<p>Packet Swith have a <strong>output buffer(output queue),</strong>
which stores packets that the router is about to send into that link. In
addition to the <strong>store-and-forward delays</strong>, packets
suffer output buffer <strong>queuing delays</strong>. When the output
buffer is full, <strong>packet loss</strong> will occur.</p>
<h5 id="c.-forwarding-tables-and-routing-protocols">c. Forwarding Tables
and Routing Protocols</h5>
<p>each router has a <strong>forwarding table</strong> （转发表）that
maps destination addresses (or portions of the destination addresses) to
that router’s outbound links.</p>
<h4 id="ii.-circuit-switching-电路交换">ii. Circuit Switching
电路交换</h4>
<blockquote>
<p>the resources needed along <strong>a path (buffers, link transmission
rate) to provide for communication between the end systems are
reserved</strong> for the duration of the communication session between
the end systems</p>
<p><strong>end-to-end</strong> connection</p>
</blockquote>
<h5 id="multiplexing-in-circuit-switched-networks">Multiplexing in
Circuit-Switched Networks</h5>
<ul>
<li><p>frequency-division multiplexing (FDM) 频分复用 ：</p>
<p>The width of the range of frequency is called, not surprisingly, the
<strong>bandwidth</strong>.</p></li>
<li><p>time-division multiplexing (TDM) 时分复用:</p>
<p>circuit switching is <strong>wasteful</strong> because the dedicated
circuits are idle during <strong>silent
periods</strong>(静默期)</p></li>
</ul>
<h4 id="iii.-packet-switching-versus-circuit-switching">iii. Packet
Switching Versus Circuit Switching</h4>
<h5 id="packet-switching">Packet Switching</h5>
<ul>
<li>it offers better sharing of transmission capacity</li>
<li>it is simpler, more efficient, and less costly to implement</li>
<li>great for bursty data</li>
<li>but excessive congestion possible</li>
</ul>
<h5 id="circuit-switching">Circuit Switching</h5>
<ul>
<li>good for real-time serives</li>
<li>silent periods would cause time waste</li>
</ul>
<h4 id="iv.-a-network-of-networks">IV. A Network of Networks</h4>
<ul>
<li>ISP: 互联网服务提供商</li>
<li>IXP： Internet Exchange Point 因特网交换点
保证同级ISP对等（peering）</li>
<li>content provider networks：内容提供商网络</li>
</ul>
<h3 id="delay-loss-and-throughput">3. *Delay, Loss, and Throughput</h3>
<blockquote>
<p>in Packet-Switched Networks</p>
</blockquote>
<h4 id="types-of-delay">Types Of Delay</h4>
<ul>
<li><p><strong>nodal processing delay</strong>（节点处理时延）:</p>
<p>The time required to <strong>examine the packet’s header</strong> and
<strong>determine where to direct the packet</strong> is part of the
processing delay.</p></li>
<li><p><strong>Queuing Delay</strong>（排队时延）：</p>
<p>At the queue, the packet experiences a queuing delay as it waits to
be transmitted onto the link.</p></li>
<li><p><strong>Transmission Delay</strong>（传输时延）：</p>
<p>Denote the length of the packet by L bits, and denote the
transmission rate of the link from router A to router B by R bits/sec.
The transmission delay is L/R</p></li>
<li><p><strong>Propagation Delay</strong>（传播时延）：</p>
<p>Once a bit is pushed into the link, it needs to propagate to router
B. The time required to propagate from the beginning of the link to
router B is the propagation delay</p></li>
</ul>
<h4 id="queuing-delay-and-packet-loss">Queuing Delay and Packet
Loss</h4>
<ul>
<li><strong>traffic intensity</strong>（流量强度）： let <em>a</em>
denote the <strong>average rate at which packets</strong> arrive at the
queue (<em>a</em> is in units of packets/sec)（包到达平均速度）Recall
that R is the transmission rate（传输速度）; Also suppose, for
simplicity, that all packets consist of L bits. Then the average rate at
which bits arrive at the queue is <em>La</em>
bits/sec（包到达路由平均速度） The ratio <em>La/R</em>, called the
traffic intensity. 保证流量强度&lt;=1才能正常工作</li>
<li><strong>Packet Loss</strong>（丢包）：With no place to store such a
packet, a router will drop that packet; that is, the packet will be
lost.</li>
</ul>
<h4 id="end-to-end-delay">End-to-End Delay</h4>
<p>suppose there are <strong>N - 1</strong> routers between the source
host and the destination host</p>
<p>$ d_{end-end} = N(d_{proc}+d_{trans}+d_{prop})$</p>
<h4 id="throughput-in-computer-networks">Throughput in Computer
Networks</h4>
<ul>
<li><strong>instantaneous throughput</strong>:at any instant of time is
the rate (in bits/sec) at which Host B is receiving the file</li>
<li><strong>average throughput</strong>: For all file</li>
<li>the <strong>throughput</strong> depends not only on the transmission
rates of the links along the path, but also on the intervening
traffic</li>
</ul>
<h3 id="protocol-layers-and-their-service-models">4. Protocol Layers and
Their Service Models</h3>
<h4 id="layered-architecture">Layered Architecture</h4>
<blockquote>
<p>Protocol layering has conceptual and structural advantages</p>
<p>the protocols of the various layers are called the <strong>protocol
stack</strong></p>
</blockquote>
<p>Five-layer Internet protocol stack:</p>
<ol type="1">
<li><p><strong>Application Layer</strong>: HTTP</p>
<p>The application layer is where <strong>network applications and their
application-layer protocols</strong> reside. this packet of information
at the application layer as a <strong>message</strong>（报文）.</p></li>
<li><p><strong>Transport Layer</strong>：TCP UDP</p>
<p>The Internet’s transport layer transports application-layer messages
between application endpoints. Transport-layer packet as a
<strong>segment</strong>(报文段).</p>
<p>TCP guaranteed delivery of application-layer messages to the
destination and flow control (that is, sender/receiver speed matching)
But UDP not.</p></li>
<li><p><strong>Network Layer</strong>：IP</p>
<p>The Internet’s network layer is responsible for moving network-layer
packets known as <strong>datagrams</strong> (数据报)from one host to
another.</p></li>
<li><p><strong>Link Layer</strong>:</p>
<p>To move a packet from one node (host or router) to the next node in
the route, the network layer relies on the services of the link layer.
The services provided by the link layer depend on the <strong>specific
link-layer protocol</strong>(特定链路层协议) that is employed over the
link. refer to the linklayer packets as
<strong>frames.</strong>（帧）</p></li>
<li><p><strong>Physical Layer</strong>：</p>
<p>the job of the physical layer is to <strong>move the individual
bits</strong> within the frame from one node to the next.</p></li>
</ol>
<p><strong>OSI Model</strong>：</p>
<blockquote>
<p>There are application layer, presentation layer, session layer,
transport layer, network layer, data link layer, and physical layer from
up to down.</p>
</blockquote>
<ul>
<li><strong>presentation layer</strong> is to provide services that
allow communicating applications to interpret the meaning of data
exchanged. These services include <strong>data compression</strong> and
<strong>data encryption</strong> as well as <strong>data
description</strong>.</li>
<li><strong>The session layer</strong> provides for <strong>delimiting
and synchronization of data exchange</strong>(数据交换和定界), including
the means to build a checkpointing and recovery scheme.</li>
</ul>
<h4 id="encapsulation">Encapsulation</h4>
<p>we see that at each layer, a packet has two types of fields:
<strong>header fields</strong>（首部字段） and a <strong>payload
field</strong>（有效载荷字段）. The payload is typically a packet from
the layer above.</p>
<p>In every layer, the layer encapsulates the data from last layer as
payload field, then add its own header information, to build whole
information.</p>
<h2 id="chapter-2-application-layer">Chapter 2 Application Layer</h2>
<blockquote>
<p>2.2 2.5 2.6 are important</p>
<p>DNS protocol not important</p>
<p>2.3 2.4-</p>
</blockquote>
<h3 id="principles-of-network-applications">1. Principles of Network
Applications</h3>
<h4 id="i.-network-application-architectures">i. Network Application
Architectures</h4>
<blockquote>
<p>two predominant（主要的） architectural paradigms used in modern
network applications: the client-server architecture or the peer-to-peer
(P2P) architecture</p>
</blockquote>
<ul>
<li><p><strong>the client-server architecture：</strong></p>
<p>client and server are separate and fixed, and they perform they own
functions</p></li>
<li><p><strong>P2P architecture:</strong></p>
<p>Because the peers（对等方） communicate without passing through a
dedicated（专用的） server, the architecture is called peer-to-peer.
These peers can be server also can be clientz.</p>
<p>P2P is <strong>self-scalability and cost effective</strong>. And have
three <strong>challenges</strong>: ISP Friendly, Security,
Incentives（激励）.</p></li>
</ul>
<h4 id="ii.-processes-communicating">ii. Processes Communicating</h4>
<blockquote>
<p>In truth, server and client are just two process</p>
</blockquote>
<p>A process sends messages into, and receives messages from, the
network through a software interface called a socket（套接字）. It is
also referred to as the Application Programming Interface (API) between
the application and the network</p>
<p>We use <strong>IP address and port number</strong> to do addressing
process.</p>
<h4 id="iii.-transport-services-available-to-applications">iii.
Transport Services Available to Applications</h4>
<ul>
<li>Reliable Data Transfer</li>
<li>Throughput</li>
<li>Timing</li>
<li>Security</li>
</ul>
<h4 id="iv.-transport-services-provided-by-the-internet">IV. Transport
Services Provided by the Internet</h4>
<ul>
<li><p>TCP Servies</p>
<p>Connection-oriented service and Reliable data transfer
service</p></li>
<li><p>UDP</p>
<p>UDP is a no-frills, lightweight transport protocol, providing minimal
services. UDP is <strong>connectionless, unreliable</strong>. UDP
provides <strong>no guarantee</strong> that the message will ever reach
the receiving process. Furthermore, messages that do arrive at the
receiving process may arrive <strong>out of order</strong>. And no
congestion-control mechanism（拥塞机制）.</p></li>
</ul>
<h4 id="v.-services-not-provided-by-internet-transport-protocols">V.
Services Not Provided by Internet Transport Protocols</h4>
<p>But in our brief description of TCP and UDP, conspicuously（明显的）
missing was any mention of throughput or timing guarantees—services not
provided by today’s Internet transport protocols.</p>
<h3 id="the-web-and-http">*2. The Web and HTTP</h3>
<h4 id="i.-overview-of-http">i. Overview of HTTP</h4>
<p>The <strong>HyperText Transfer Protocol (HTTP)</strong>, the Web’s
application-layer protocol, is at the heart of the Web. . Because an
HTTP server maintains no information about the clients, HTTP is said to
be a <strong>stateless protocol</strong>（无状态协议）. We also remark
that the <strong>Web uses the client-server application
architecture,</strong></p>
<h4 id="ii.-non-persistent-and-persistent-connections">ii.
Non-Persistent and Persistent Connections</h4>
<blockquote>
<p>Attention:
对多并发的例子中，线程之间对其他线程的连接一般是不可见的</p>
<p>流水线式不一定是绝对好的，本质是提高链路的利用率（充分利用带宽时延积）</p>
<p>先获取HTML然后在获取其它对象</p>
<ol type="1">
<li>可能会因为头包过大造成链路阻塞</li>
<li>返回必须按照接收顺序，已处理好的必须等前一个发送后才可以发送</li>
</ol>
</blockquote>
<ul>
<li><strong>non-persistent connections</strong>: each request/response
pair be sent over a separate TCP connection</li>
<li><strong>persistent connections</strong>: all of the requests and
their corresponding responses be sent over the same TCP
connection，注意持久化一般是流水线</li>
</ul>
<p><strong>round-trip time (RTT 往返时延)</strong>：the time it takes
for a small packet to travel from client to server and then back to the
client</p>
<p><strong>the total response time:(总响应时间)</strong> two RTTs plus
the transmission time at the server of the HTML file.</p>
<p>Non-persistent connections have some
<strong>shortcomings</strong>.</p>
<ul>
<li>a brand-new connection must be established and maintained for each
requested object.</li>
<li>each object suffers a delivery delay of two RTTs</li>
</ul>
<h4 id="iii.-http-message-format">iii. HTTP Message Format</h4>
<ol type="1">
<li><p>HTTP Request Message</p>
<ul>
<li>request line（请求行）: first line
<ul>
<li>method field: <strong>GET, POST</strong>, HEAD, PUT, and DELETE</li>
<li>URL field</li>
<li>HTTP Version field</li>
</ul></li>
<li>header line（首部行）: subsequent line
<ul>
<li>Host : specifies the host on which the object resides</li>
<li>Connection : whether use persistent connections</li>
<li>User-agent : specifies the user agent , that is, the browser type.
This header line is useful because the server can actually send
different versions of the same object to different types of user
agents.</li>
<li>Accept-language: indicates that the user prefers language
version</li>
<li>POST method: has an entity body for post data, but get also can do
use work with saving data in URLs.</li>
</ul></li>
</ul></li>
<li><p>HTTP Request Message</p>
<ul>
<li><p>status line : first line</p>
<p>version + status code + phrase</p>
<ul>
<li>200 OK : succeeded</li>
<li>301 Moved Permanently : Requested object has been permanently moved
and new URL will be returned</li>
<li>400 Bad Request : the request could not be understood by the
server.</li>
<li>404 Not Found : The requested document does not exist on this
server</li>
<li>505 HTTP Version Not Supported : ~~~</li>
</ul></li>
<li><p>header line: subsequent line :</p>
<ul>
<li>Connection : tell the client that whether close the TCP connection
after sending the message</li>
<li>Date : <strong>indicates the time and date when the HTTP response
was created and sent by the server</strong>. Note that this is not the
time when the object was created or last modified; it is the time when
the server retrieves the object from its file system, inserts the object
into the response message, and sends the response message.</li>
<li>Server : analogous to the User-agent</li>
<li>Last-Modified : the time and date when the object was created or
last modified</li>
<li>Content-Length : data size</li>
<li>Content-Type : data type such as HTML</li>
</ul></li>
<li><p>entity body : save data</p></li>
</ul></li>
</ol>
<h4 id="iv.-user-server-interaction-cookies">iv. User-Server
Interaction: Cookies</h4>
<blockquote>
<p>cookies allow sites to keep track of users</p>
</blockquote>
<p>Cookie has four components:</p>
<ol type="1">
<li>a cookie header line in the HTTP <strong>response</strong>
message</li>
<li>a cookie header line in the HTTP <strong>request</strong>
message</li>
<li>a cookie file kept on the user’s end system and managed by the
user’s <strong>browser</strong></li>
<li>a back-end database at <strong>the Web site</strong></li>
</ol>
<p>Although cookies often simplify the Internet shopping experience for
the user, they are controversial because they can also be considered as
an invasion of privacy</p>
<h4 id="v.-web-caching">V. Web Caching</h4>
<blockquote>
<p>A Web cache—also called a proxy server（代理服务器）—is a network
entity that satisfies HTTP requests on the behalf of an origin Web
server</p>
</blockquote>
<p>It works like this:</p>
<p><img
src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/web_cache_1.png" /></p>
<p>Note that a cache is <strong><em>both a server and a
client</em></strong> at the same time.</p>
<p>Advantages:</p>
<ul>
<li><strong><em>A Web cache can substantially reduce the response time
for a client request</em></strong>, particularly if the bottleneck
bandwidth between the client and the origin server is much less than the
bottleneck bandwidth between the client and the cache （加速）</li>
<li>Web caches can substantially reduce traffic on an institution’s
access link to the Internet. So they does not have to upgrade bandwidth
as quickly, thereby reducing costs. （减少通信量降低带宽不耗钱）</li>
<li>Web caches can substantially reduce Web traffic in the Internet as a
whole, thereby improving performance for all applications.
（降低网络流量，提高性能）</li>
</ul>
<p><strong>Content Distribution Networks (CDNs)</strong>
（内容分发网络）: A CDN company installs many geographically distributed
caches throughout the Internet, thereby localizing much of the
traffic.</p>
<h4 id="vi.-the-conditional-get">VI. The Conditional GET</h4>
<blockquote>
<ul>
<li>the request message uses the GET method</li>
<li>the request message includes an <strong>If-ModifiedSince</strong>:
header line</li>
</ul>
</blockquote>
<p>Use the conditional get to guarantee the file in proxy server is up
to date.</p>
<h3 id="dnsthe-internets-directory-service">5. DNS—The Internet’s
Directory Service</h3>
<blockquote>
<p>domain name system: a directory service that translates hostnames to
IP addresses 53端口</p>
</blockquote>
<p>Definition:</p>
<ol type="1">
<li>a distributed database implemented in a hierarchy of DNS
servers</li>
<li>an application-layer protocol that allows hosts to query the
distributed database</li>
</ol>
<h4 id="i.-services-provided-by-dns">i. Services Provided by DNS</h4>
<ul>
<li>Host aliasing</li>
<li>Mail server aliasing</li>
<li>Load distribution（负载分配）（一个域名对应多个服务器IP）</li>
</ul>
<h4 id="ii.-overview-of-how-dns-works">ii. Overview of How DNS
Works</h4>
<ul>
<li>centralized design: A simple design for DNS would have one DNS
server that contains all the mappings
<ul>
<li>A single point of failure</li>
<li>Traffic volume</li>
<li>Distant centralized database</li>
<li>Maintenance</li>
</ul></li>
<li>distributed hierarchical design: uses a large number of servers,
organized in a hierarchical fashion and distributed around the world
<ul>
<li>root DNS servers : In the Internet there are 13 root DNS
servers</li>
<li>top-level domain (TLD) servers</li>
<li>authoritative DNS servers（权威域名服务器）: Every organization with
publicly accessible hosts (such as Web servers and mail servers) on the
Internet must provide publicly accessible DNS records that map the names
of those hosts to IP addresses</li>
<li>local DNS server : A local DNS server does not strictly belong to
the hierarchy of servers but is nevertheless central to the DNS
architecture; When a host makes a DNS query, the query is sent to the
local DNS server, which acts a proxy.
<ul>
<li>recursive：如果全部采用这种方式会给更服务器极大的压力</li>
<li>iterative</li>
</ul></li>
</ul></li>
</ul>
<h4 id="iv.-dns-records-and-messages">iv. DNS Records and Messages</h4>
<p>resource records (RRs): provide hostname-to-IP address mappings</p>
<p><strong>format : (Name, Value, Type, TTL)</strong></p>
<ul>
<li>Type = A : Name is a hostname and Value is the IP address for the
hostname.</li>
<li>Type = NS : Name is a domain (such as foo.com) and Value is the
hostname of an authoritative DNS server that knows how to obtain the IP
addresses for hosts in the domain</li>
<li>Type = CNAME : Value is a canonical hostname for the alias hostname
Name</li>
<li>Type = MX : Value is the canonical name of a mail server that has an
alias hostname Name</li>
</ul>
<h3 id="电子邮件">电子邮件</h3>
<p>3个组成部分：用户代理，邮件服务器，SMTP</p>
<h4 id="smtp保存状态">SMTP(保存状态)</h4>
<p>25
号端口，简单邮件传输协议。它是一组用于从源地址到目的地址传输邮件的规范，通过它来控制邮件的中转方式。SMTP
协议属于 TCP/IP
协议簇，它帮助每台计算机在发送或中转信件时找到下一个目的地。SMTP
服务器就是遵循 SMTP 协议的发送邮件服务器。</p>
<h4 id="pop3">POP3</h4>
<p>Post Office Protocol
3的简称，即邮局协议的第3个版本,它规定怎样将个人计算机连接到Internet的邮件服务器和下载电子邮件的电子协议</p>
<h4 id="imap保存状态">IMAP（保存状态）</h4>
<p>Internet Mail Access Protocol，即交互式邮件存取协议</p>
<p>开启了IMAP后，您在电子邮件客户端收取的邮件仍然保留在服务器上，同时在客户端上的操作都会反馈到服务器上</p>
<h3 id="ftp保存状态">FTP（保存状态）</h3>
<p>两个TCP连接，一个控制连接，一个控制数据连接（20，21端口）</p>
<h2 id="chapter-3-transport-layer">Chapter 3 Transport Layer</h2>
<blockquote>
<p>A transport-layer protocol provides for <strong>logical
communication</strong> between application
<strong><em>processes</em></strong> running on different hosts.</p>
<p>3.6 不做要求</p>
</blockquote>
<p>###　3.1 Introduction and Transport-Layer Services</p>
<h4 id="relationship-between-transport-and-network-layers">Relationship
Between Transport and Network Layers</h4>
<p>transport layer lies just above the network layer in the protocol
stack. Whereas a transport-layer protocol provides logical communication
between <strong><em>processes</em></strong> running on different hosts,
a network-layer protocol provides logical communication between
<em>hosts</em>.</p>
<h4 id="overview-of-the-transport-layer-in-the-internet">Overview of the
Transport Layer in the Internet</h4>
<ul>
<li><p>IP service model —— <strong>best-effort delivery
service</strong></p>
<p>IP makes its “best effort” to deliver segments between communicating
hosts, but it makes no guarantees. So IP is unreliable service.</p></li>
<li><p>multiplexing &amp; demultiplexing</p>
<p>Extending <strong>host-to-host</strong> delivery to
<strong>process-to-process</strong> delivery</p></li>
<li><p>TCP</p>
<p><strong>reliable data transfer and provides congestion
control</strong>. TCP congestion control prevents any one TCP connection
from swamping the links and routers between communicating hosts with an
excessive amount of traffic.</p></li>
</ul>
<h3 id="multiplexing-and-demultiplexing">3.2 Multiplexing and
Demultiplexing</h3>
<p>a process can have one or more <strong><em>sockets</em></strong>,
doors through which data passes from <strong>the network to the
process</strong> and through which data passes from the process to the
network.</p>
<ul>
<li><p>demultiplexing: delivering the data in a transport-layer segment
to the correct socket</p></li>
<li><p>multiplexing:</p>
<p>gathering data chunks at the source host from <strong>different
sockets</strong>, encapsulating each data chunk with header information
(that will later be used in demultiplexing) to create segments, and
passing the segments to the network layer</p></li>
</ul>
<p>Socket:</p>
<ol type="1">
<li>unique identifiers to identify UDP, TCP sockets</li>
<li>the <strong>source port number field</strong> and the
<strong>destination port number field</strong></li>
</ol>
<p>the port number ranges from 0 to 65535 (16 bits to express), [0,
1024) is well-known port numbers</p>
<h4 id="connectionless-multiplexing-and-demultiplexing">Connectionless
Multiplexing and Demultiplexing</h4>
<p>可能是因为UDP是无连接，而TCP是有连接的协议的区分</p>
<p>UDP socket is fully identified by a <strong>two-tuple</strong>
consisting of a <strong>destination IP address and a destination port
number</strong>.</p>
<h4
id="connection-oriented-multiplexing-and-demultiplexing">Connection-Oriented
Multiplexing and Demultiplexing</h4>
<p>identified by four values:</p>
<ol type="1">
<li>the source port number in the segment</li>
<li>the IP address of the source host</li>
<li>the destination port number in the segment</li>
<li>its own IP address</li>
</ol>
<p>当一个UDP服务器接收到一个UDP报文段时，它会根据收到的UDP报文段的源IP和源端口号，把数据发送回客户端，它并不需要创建一个新的套接字来处理该报文段；</p>
<p>而对于一个TCP服务器，当它接受一个连接时，它会产生一个新的套接字，然后通过新的套接字来与客户端通信，也就是通过新的套接字来把数据发送回给客户端。由于每一个连接都会产生一个新的套接字，所以具有不同的源IP或源端口号的连接就是一个不同的连接，对应着产生的新的不同的套接字
原文链接：https://blog.csdn.net/ljianhui/article/details/21660629</p>
<h3 id="connectionless-transport-udp">3.3 Connectionless Transport:
UDP</h3>
<ul>
<li><p><em>No connection state.</em> TCP maintains connection state in
the end systems.</p></li>
<li><p><em>Small packet header overhead.</em> The TCP segment has 20
bytes of header over head in every segment, whereas UDP has only 8 bytes
of overhead.</p></li>
<li><p>we mention that it is possible for an application to have
reliable data transfer when using UDP. This can be done if reliability
is built into the application itself</p></li>
</ul>
<h4 id="udp-segment-structure">UDP Segment Structure</h4>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_7.png" style="zoom:50%;" /></p>
<h4 id="udp-checksum">UDP Checksum</h4>
<p>UDP at the sender side performs the 1s complement of the sum of all
the 16-bit words in the segment, with any overflow encountered during
the sum being wrapped around(<strong>add the overflow bits with the
sum</strong>)</p>
<h3 id="principles-of-reliable-data-transfer">3.4 Principles of Reliable
Data Transfer</h3>
<h4 id="building-a-reliable-data-transfer-protocol">Building a Reliable
Data Transfer Protocol</h4>
<ol type="1">
<li><p><strong>rdt1.0</strong></p>
<p>the underlying channel is completely reliable</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_9.png" style="zoom:50%;" /></p></li>
<li><p><strong>rdt2.0</strong>: Reliable Data Transfer over a Channel
with Bit Errors</p></li>
</ol>
<p>an ARQ (Automatic Repeat reQuest) protocols</p>
<p>include RDT2.0-3, gbn, sr, tcp</p>
<ul>
<li><p>checksum</p></li>
<li><p>feedback (ACK,NAK)</p></li>
<li><p>resend</p></li>
</ul>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_10.png" style="zoom:50%;" /></p>
<ol start="3" type="1">
<li><p><strong>rdt2.1</strong>: can detect ACK or NAK errors based on
2.0</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_11.png" style="zoom:50%;" />
<img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_12.png" style="zoom:50%;" /></p></li>
<li><p><strong>rdt2.2</strong>: implement without NAK based on 2.1</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_13.png" style="zoom:50%;" />
<img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_14.png" style="zoom:50%;" /></p></li>
<li><p><strong>rdt3.0</strong>: Reliable Data Transfer over a Lossy
Channel with Bit Errors</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_15.png" style="zoom:50%;" /></p></li>
</ol>
<h4 id="pipelined-reliable-data-transfer-protocols">Pipelined Reliable
Data Transfer Protocols</h4>
<ol type="1">
<li><p>Stop&amp;Wait: rdt</p></li>
<li><p>PipeLine: gbn, sr, tcp in order.</p></li>
</ol>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_19.png" style="zoom:50%;" /></p>
<p>Example:</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_22.png" style="zoom:50%;" /></p>
<p>The window size will move as long as getting the ACK.</p>
<p><strong>only a single timer</strong>, which can be thought of as a
timer for the oldest transmitted but not yet acknowledged packet. If an
ACK is received but there are still additional transmitted but not yet
acknowledged packets, the timer is restarted. If there are no
outstanding, unacknowledged packets, the timer is stopped.</p>
<ul>
<li><p><strong>Selective Repeat (SR)</strong></p>
<p>sequence-number space format:</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_23.png" style="zoom:50%;" /></p>
<p>Actions in sender:</p>
<ol type="1">
<li>Data received from above</li>
<li>Timeout: <strong>each packet must now have its own logical
timer</strong>, since only a single packet will be transmitted on
timeout</li>
<li>ACK received: <strong>the windows will move right to the
unacknowledged packet with the smallest sequence number</strong> when
received the most left ACK</li>
</ol>
<p>The SR receiver will acknowledge a correctly received packet whether
or not it is in order. Out-of-order packets are buffered until any
missing packets (that is, packets with lower sequence numbers) are
received, at which point a batch of packets can be delivered in order to
the upper layer.</p>
<p>Actions in receiver:</p>
<ol type="1">
<li>Packet with sequence number in [rcv_base, rcv_base+N-1] is correctly
received. In this case, the received packet falls within the receiver’s
window and a selective ACK packet is returned to the sender. If the
packet was not previously received, it is buffered. If this packet has a
sequence number <strong>equal to the base of the receive window
(rcv_base in Figure 3.22), then this packet, and any previously buffered
and consecutively numbered (beginning with rcv_base)</strong> packets
are delivered to the upper layer. The receive window is then moved
forward by the number of packets delivered to the upper layer.</li>
<li>Packet with sequence number in [rcv_base-N, rcv_base-1] is correctly
received. return an ACK</li>
</ol>
<p><strong>SR’s problem</strong>: can’t know <strong><em>a new packet or
a retransmission?</em></strong></p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_27.png" style="zoom:70%;" /></p>
<p>The solution of this problem: <strong><em>the window size must be
less than or equal to half the</em></strong> <strong><em>size of the
sequence number space for SR protocols.</em></strong></p></li>
</ul>
<p><strong>Summary:</strong></p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/T3_1.png" style="zoom:70%;" /></p>
<h3 id="connection-oriented-transport-tcp">3.5 Connection-Oriented
Transport: TCP</h3>
<p>GBN-SR 窗口不变, TCP 窗口可以变</p>
<h4 id="the-tcp-connection">The TCP Connection</h4>
<ul>
<li>connection-oriented</li>
<li>full-duplex service（全双工）</li>
<li>point-to-point</li>
<li>three-way handshake</li>
<li><strong>maximum segment size (MSS):</strong> The maximum amount of
data that can be grabbed and placed in a segment</li>
<li><strong>maximum transmission unit (MTU):</strong> the length of the
largest link-layer frame that can be sent by the local sending host</li>
</ul>
<h4 id="tcp-segment-structure">TCP Segment Structure</h4>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_29.png" style="zoom:50%;" /></p>
<ul>
<li><strong>Sequence Numbers(SEQ)</strong>: the byte-stream number of
the first byte in the segment</li>
<li><strong>Acknowledgment Numbers(ACK)</strong>: Host A puts in its
segment is the sequence number of the next byte Host A is expecting from
Host B（想要的下一个序号）TCP is said to provide <strong>cumulative
acknowledgments</strong></li>
</ul>
<p>Example：</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_31.png" style="zoom:50%;" /></p>
<h4 id="round-trip-time-estimation-and-timeout">Round-Trip Time
Estimation and Timeout</h4>
<p>The sample RTT, denoted SampleRTT, for a segment is the amount of
time between when the segment is sent (that is, passed to IP) and when
an acknowledgment for the segment is received.</p>
<p>TCP never computes a SampleRTT for a segment that has been
retransmitted; it only measures SampleRTT for segments that have been
transmitted once.</p>
<ul>
<li>use <strong>exponential weighted moving average (EWMA)</strong> to
estimate RTT</li>
</ul>
<p><span class="math inline">\(EstimatedRTT = (1 – \alpha) •
EstimatedRTT + \alpha • SampleRTT\)</span></p>
<ul>
<li>In addition to having an estimate of the RTT, it is also valuable to
have a measure of the variability of the RTT.</li>
</ul>
<p>$ DevRTT = (1 – ) • DevRTT + •┃ SampleRTT – EstimatedRTT ┃$</p>
<ul>
<li>use this formula the get RTT time</li>
</ul>
<p>$ TimeoutInterval = EstimatedRTT + 4 • DevRTT$</p>
<h4 id="reliable-data-transfer">Reliable Data Transfer</h4>
<ul>
<li><strong>Doubling the Timeout Interval</strong></li>
<li><strong>Fast Retransmit</strong>:In the case that three duplicate
ACKs are received (except the first ACK)</li>
</ul>
<h4 id="flow-control">Flow Control</h4>
<p>TCP流控是因为应用层处理速度太慢了,
发送者和接收者的协调,拥塞是路由器和发送者</p>
<p>eliminate the possibility of the sender overflowing the receiver’s
buffer. Flow control is thus a speed-matching service—matching the rate
at which the sender is sending against the rate at which the receiving
application is reading</p>
<p>TCP通过让发送方维护一个称为接收窗口的变量来提供流量控制</p>
<p>A通过TCP连接向B发送一个大文件</p>
<ul>
<li>LastByteRead:
主机B上的应用程序进程从缓存独出的数据流的最后一个字节的编号</li>
<li>LastByteRevd: 网络到达已放入接收缓存的最后一个字节编号</li>
</ul>
<p>保持下式成立</p>
<p>$ LastByteRcvd-LastByteRead RevBuffer $</p>
<p>接收窗口用rwnd表示，可得 <span
class="math inline">\(rwnd=RcvBuffer-[LastByteRcvd-LastByteRead]\)</span></p>
<p>在发送方有 <span class="math inline">\(LastByteSent-LastByteAcked \le
rwnd\)</span></p>
<p><strong>当主机B接收窗口为空时，主机A继续发送只有一个字节数据的报文段，避免A被阻塞的情况</strong></p>
<h4 id="tcp-connection-management">TCP Connection Management</h4>
<p>MSS在传输SYN时传输确定, TCP可以将包合并发就合并发, SYN
包要独占一个序列号 SYN：1.同步网络参数 2.同步序列号
FIN：表示不发了，但可以接收</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_39.png" style="zoom:50%;" /></p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_40.png" style="zoom:50%;" /></p>
<h3 id="tcp-congestion-control">3.7 TCP Congestion Control</h3>
<p><strong>each side of a TCP connection</strong> consists of a
<strong>receive buffer, a send buffer, and several variables</strong>
(LastByteRead, rwnd, and so on). The TCP congestion-control mechanism
operating at the sender keeps track of an additional variable, the
congestion window. <strong>The congestion window</strong>, denoted cwnd,
imposes a constraint on the rate at which a TCP sender can send traffic
into the network.</p>
<p>TCP uses acknowledgments to trigger (or clock) its increase in
congestion window size, TCP is said to be
<strong>self-clocking</strong>.</p>
<p><strong>书本中的TCP标准遵循单一重传定时器的推荐</strong></p>
<p><strong>FSM</strong>：</p>
<p>对快速重传的快速恢复的cwnd有减半加三（考虑重传时没有拥塞）和不加三两种操作，这里采用不加三</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_52.png" style="zoom:70%;" /></p>
<p><strong>TCP congestion-control algorithm</strong>:</p>
<ol type="1">
<li><p>Slow Start</p>
<p><strong>begin with 1 MSS</strong> then <strong>doubling</strong> of
the last sending rate every RTT until meets ssthresh or a loss, then
enter congestion avoidance</p></li>
<li><p>congestion avoidance</p>
<p><strong>linear increase</strong> (of 1 MSS per RTT) until meet a
loss, then <strong>set the ssthresh to half</strong> and enter fast
recovery</p></li>
<li><p>fast recovery</p>
<p>两个版本在超时后都置为1, 丢包（快速重传）处理不一样</p>
<ul>
<li>Tahoe: set cwnd to 1 MSS</li>
<li>Reno: set the rate to the half of the last rate (real fast
recovery)</li>
</ul></li>
</ol>
<p>Example:</p>
<p><img
src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_53.png" /></p>
<p>TCP is <strong>fair</strong></p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/3_56.png" style="zoom:50%;" /></p>
<p>these two connection will infinitely approach <em>the equal bandwidth
share line</em>.</p>
<h2 id="chapter-4-the-network-layer">Chapter 4 The Network Layer</h2>
<h3 id="introduction">4.1 Introduction</h3>
<ul>
<li><strong>Forwarding（转发）</strong>: When a packet arrives at a
router’s input link, the router must move the packet to the appropriate
output link</li>
<li><strong>Routing</strong>: The network layer must determine the route
or path taken by packets as they flow from a sender to a receiver. The
algorithms that calculate these paths are referred to as routing
algorithms</li>
</ul>
<p>Every router has a <strong>forwarding table</strong>.</p>
<p>ATM services models:</p>
<ul>
<li>CBR: <strong>Constant bit rate (CBR) ATM network
service.</strong></li>
<li>ABR: <strong>Available bit rate (ABR) ATM network
service</strong></li>
</ul>
<h3 id="virtual-circuit-and-datagram-networks">4.2 Virtual Circuit and
Datagram Networks</h3>
<h4 id="virtual-circuit-networks">Virtual-Circuit Networks</h4>
<p>consists of:</p>
<ul>
<li>a <strong>path</strong> (that is, a series of links and routers)
between the source and destination hosts</li>
<li><strong>VC numbers</strong>, one number for each link along the
path</li>
<li>entries in the <strong>forwarding table</strong> in each router
along the path</li>
</ul>
<p>Whenever a new VC is established across a router, an entry is added
to the forwarding table. Similarly, whenever a VC terminates, the
appropriate entries in each table along its path are removed.</p>
<p><strong>three identifiable phases in a virtual circuit</strong>:</p>
<ol type="1">
<li>VC setup</li>
<li>Data transfer</li>
<li>VC teardown</li>
</ol>
<h4 id="datagram-networks">Datagram Networks</h4>
<p>the router uses <strong><em>the longest prefix matching
rule</em></strong> in datagram networks.</p>
<p>Because forwarding tables in datagram networks <strong>can be
modified at any time</strong>, a series of packets sent from one end
system to another may follow different paths through the network and may
arrive <strong>out of order</strong>.</p>
<h3 id="whats-inside-a-router">4.3 What’s Inside a Router?</h3>
<h4 id="architecture">Architecture</h4>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_6.png" style="zoom:50%;" /></p>
<h4 id="switching">Switching</h4>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_8.png" style="zoom:50%;" /></p>
<h4 id="where-does-queueing-occur">Where Does Queueing Occur?</h4>
<p>the router’s memory can eventually be exhausted and packet loss will
occur when no memory is available to store arriving packets.</p>
<p><strong>packet scheduler（分组调度）</strong>:</p>
<p><strong>active queue management（AQM 主动队列管理）</strong></p>
<ul>
<li>drop-tail（弃尾）</li>
<li>Random Early Detection (RED随机早期检测)</li>
</ul>
<p><strong>head-of-the-line (HOL) blocking（线路前部阻塞）</strong>:
前一个分组和其他的输入端口竞争，阻塞了后面没有冲突的分组的发送</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_11.png" style="zoom:50%;" /></p>
<h4 id="the-routing-control-plane">The Routing Control Plane</h4>
<p>software pass....</p>
<h3 id="ip">4.4 IP</h3>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_12.png" style="zoom:60%;" /></p>
<h4 id="datagram-format">Datagram Format</h4>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_13.png" style="zoom:50%;" /></p>
<p>此处校验和计算方法和UDP处出现的校验和计算方法一致</p>
<p><strong>IP Datagram Fragmentation</strong></p>
<p>datagram: 4000 bytes</p>
<p>MTU: 1500 bytes</p>
<p>IP header: 20 bytes</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/T4_2.png" style="zoom:50%;" /></p>
<h4 id="ipv4-addressing">IPv4 Addressing</h4>
<p>The boundary between the host and the physical link is called an
<strong>interface</strong>.</p>
<p>To determine the subnets, detach each interface from its host or
router, creating islands of isolated networks, with interfaces
terminating the end points of the isolated networks. Each of these
isolated networks is called a subnet. 没有穿越路由器属于一个子网</p>
<p>子网可用IP地址需要减2，一个是主机位全0的子网地址和主机位全1的子网广播地址</p>
<p>子网本身IP地址：前缀+全零</p>
<p>子网本身IP地址：前缀+全1(直接广播地址)（对目标子网广播）</p>
<p>255.255.255.255 子网广播地址（受限广播地址）（广播本子网）</p>
<p>0.0.0.0 网卡本身地址</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_17.png" style="zoom:50%;" /></p>
<ul>
<li><p><strong>Classless Interdomain Routing (CIDR
无类别区域间路由选择)</strong></p>
<p>a.b.c.d/x ; use prefix can reduce the size of the forwarding
table</p></li>
<li><p><strong>classful addressing 分类编址</strong></p>
<p>A：8 bits ；B：16 bits；C：24bits</p></li>
</ul>
<h4 id="dhcp-the-dynamic-host-configuration-protocol">DHCP: the Dynamic
Host Configuration Protocol</h4>
<p>a <strong>plug-and-play protocol</strong>(即插即用协议)</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_21.png" style="zoom:50%;" /></p>
<p>因为可能存在多个DHCP服务器所以需要二次确认，客户端选择一个IP并告知（一般都是第一个）</p>
<h4 id="network-address-translation-nat">Network Address Translation
(NAT)</h4>
<p>use a <strong>NAT translation table</strong> at the NAT router, and
to include port numbers as well as IP addresses in the table entries</p>
<p>NAT interferes with P2P applications.</p>
<p>可以采用第三方来通信 （Skype）</p>
<p><strong>NAT
traversal</strong>（NAT穿越）克服两台主机同属于不同NAT之后的通信，使用UPnP(Universal
Plug and Play)协议</p>
<h4 id="internet-control-message-protocol-icmp">Internet Control Message
Protocol (ICMP)</h4>
<p>The most typical use of ICMP is for error reporting</p>
<p>使用IP协议的网络层协议</p>
<h4 id="ipv6">IPv6</h4>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_24.png" style="zoom:50%;" /></p>
<ul>
<li>Next hdr:交付到哪一个协议（TCP/UDP）和v4的协议字段相同</li>
<li>IPv6不允许在路由器上分片和组装</li>
<li>IPv6没有选项字段，使得其为定长40字节</li>
<li>首部校验和消失，完全交付给上层协议处理</li>
<li>payload length: 数据长度</li>
</ul>
<p><strong>Transitioning from IPv4 to IPv6</strong></p>
<ul>
<li><p><strong>dual-stack</strong>：使用既可以处理v4也可以处理v6的路由器，但可能丢失流标签（或者其他v6特有标签）</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_25.png" style="zoom:50%;" /></p></li>
<li><p><strong>tunneling</strong>（建隧道）：将v6整体作为v4的数据段传递</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_26.png" style="zoom:50%;" /></p></li>
</ul>
<h3 id="routing-algorithms">4.5 Routing Algorithms</h3>
<p>classification</p>
<ol type="1">
<li><strong>global routing algorithm(LS)</strong> &amp;
<strong>decentralized routing algorithm(DV)</strong></li>
<li><strong>static routing algorithms</strong> &amp; <strong>Dynamic
routing algorithms</strong></li>
<li><strong>load-sensitive algorithm</strong> &amp;
<strong>load-insensitive(RIP, OSPF, BGP)</strong></li>
</ol>
<h4 id="link-state-algorithm-ls">Link-State Algorithm (LS)</h4>
<ul>
<li>D(v): cost of the least-cost path from the source node to
destination v as of this iteration of the algorithm.</li>
<li>p(v): previous node (neighbor of v) along the current least-cost
path from the source to v.</li>
<li>N' : subset of nodes; v is in N’ if the least-cost path from the
source to v is definitively known.</li>
</ul>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/LS.png" style="zoom:50%;" /></p>
<p>Example:</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/T4_3.png" style="zoom:50%;" /></p>
<p>Then we can get the forward table of u:</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_28.png" style="zoom:50%;" /></p>
<p>oscillations occur in any algorithm, not just an LS algorithm, that
uses a congestion or delay-based link metric</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_29.png" style="zoom:60%;" /></p>
<p>One way to avoid such self synchronization is for each router to
randomize the time it sends out a link advertisement.</p>
<h4 id="the-distance-vector-dv-routing-algorithm">The Distance-Vector
(DV) Routing Algorithm</h4>
<ul>
<li>For each neighbor v, the cost <strong><em>c(x,v)</em></strong> from
x to directly attached neighbor,</li>
<li>Node x’s distance vector, that is, <strong>Dx</strong> = [Dx (y): y
in N], containing x’s estimate of its cost to all destinations, y, in
N</li>
<li>The distance vectors of each of its neighbors, that is,
<strong>Dv</strong> = [Dv (y): y in N] for each neighbor v of x</li>
</ul>
<p>use this formula to update forwarding table:</p>
<p>$D_x(y)=min_v{c(x,v)+D_v(y) } $</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/DV.png" style="zoom:50%;" /></p>
<p>Examlpe:</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_30.png" style="zoom:65%;" /></p>
<h4
id="distance-vector-algorithm-adding-poisoned-reverse">Distance-Vector
Algorithm: Adding Poisoned Reverse</h4>
<p>好消息: 链路开销减小, 迭代次数少便收敛</p>
<p>坏消息 链路开销增加,
可能陷入无穷迭代（原因在于消息的虚假，增加的这条链路被其他节点引用但无法更新）</p>
<p>https://blog.csdn.net/tianlongtc/article/details/80261581</p>
<p>毒性逆转：The idea is simple—if z routes through y to get to
destination x, then z will advertise to y that its distance to x is
infinity</p>
<h4 id="a-comparison-of-ls-and-dv-routing-algorithms">A Comparison of LS
and DV Routing Algorithms</h4>
<ul>
<li>Message complexity：</li>
<li>Speed of
convergence（收敛速度）：DV收敛慢，可能遇到环路和无穷计数，LS较快</li>
<li>Robustness（健壮性）：LS更健壮，路由器故障时，DV会无穷欺骗</li>
</ul>
<h4 id="hierarchical-routing">Hierarchical Routing</h4>
<ul>
<li><p><strong>autonomous systems (ASs)</strong>: consisting of a group
of routers that are typically under the same administrative
control</p></li>
<li><p><strong>intra autonomous system routing protocol</strong>: The
routing algorithm running within an autonomous system</p></li>
<li><p><strong>gateway routers</strong>: forwarding packets to
destinations outside the AS</p></li>
<li><p><strong>inter-AS routing protocol</strong>: obtaining
reachability information from neighboring ASs and propagating the
reachability information to all routers internal to the AS</p></li>
<li><p><strong>hot-potato routing</strong>:
如果有两个网关都可以通向到另外一个AS那么简单的选择最近的那一个就可以</p></li>
</ul>
<h3 id="routing-in-the-internet">4.6 Routing in the Internet</h3>
<p><strong>intra autonomous system routing protocol</strong> also named
<strong>interior gateway protocols</strong></p>
<ol type="1">
<li>Routing Information Protocol (RIP) DV(下层ISP或企业)</li>
<li>Open Shortest Path First (OSPF) LS (上层ISP)</li>
</ol>
<h4 id="intra-as-routing-in-the-internet-rip">Intra-AS Routing in the
Internet: RIP</h4>
<p><strong>hop</strong>: the number of subnets traversed along the
shortest path from source router to destination subnet, including the
destination subnet</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_34.png" style="zoom:50%;" /></p>
<p>The maximum cost of a path is limited to 15 in RIP.</p>
<p>In RIP, routing updates are exchanged between neighbors approximately
every 30 seconds using a <strong>RIP response message</strong>(RIP
advertisements)</p>
<p>Example:</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_35.png" style="zoom:50%;" /></p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_36.png" style="zoom:50%;" /></p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_37.png" style="zoom:50%;" /></p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/4_38.png" style="zoom:50%;" /></p>
<h4 id="intra-as-routing-in-the-internet-ospf">Intra-AS Routing in the
Internet: OSPF</h4>
<p>OSPF broadcasts routing information to <strong>all</strong> other
routers in the autonomous system</p>
<p>Some of the advances embodied in OSPF：</p>
<ol type="1">
<li><em>Security</em></li>
<li><em>Multiple same-cost paths</em>（允许使用多条路径发送）</li>
<li><em>Integrated support for unicast and multicast routing</em></li>
<li><em>Support for hierarchy within a single routing domain</em></li>
</ol>
<p>OSPF可以配置为多个区域，每个区域都有区域边界路由器（<strong>area
border
routers</strong>）负责向流域以外的分组提供路由选择。AS内只有一个主干区域（backbone），主干的主要作用是为AS内其他区域之间的流量提供路由选择，包括了所有区域边界路由器和一些非边界路由器。在AS内区域间的路由选择要求分组首先路由到一个区域边界路由去，然后听过主干路由到位于母的区域的边界路由器</p>
<h4 id="inter-as-routing-bgpborder-gateway-protocol">Inter-AS Routing:
BGP（Border Gateway Protocol）</h4>
<p>*<strong>BGP转发的对象是前缀（子网）</strong></p>
<p>BGP provides each AS a means to</p>
<ol type="1">
<li>Obtain subnet reachability information from neighboring ASs.</li>
<li>Propagate the reachability information to all routers internal to
the AS</li>
<li>Determine “good” routes to subnets based on the reachability
information and on AS policy</li>
</ol>
<p>Most importantly, BGP allows each subnet to advertise its existence
to the rest of the Internet.</p>
<ul>
<li><strong>BGP peers</strong>：TCP连接的两个端点</li>
<li><strong>BGP session</strong>：发送BGP报文的TCP连接</li>
<li><strong>external BGP</strong> (<strong>eBGP</strong>)
<strong>session</strong>：跨越AS</li>
<li><strong>internal BGP</strong> (<strong>iBGP</strong>)
<strong>session</strong>：内部</li>
</ul>
<p>每一个AS都有一个ASN（autonomous system
number），但是桩（stub）AS没有，这种AS只承担目的地址为本AS的流量。AS号是ICANN
分配的</p>
<p>When a router advertises a prefix across a BGP session, it includes
with the prefix a number of BGP attributes. In BGP jargon, a prefix
along with its attributes is called a route</p>
<ul>
<li><em>AS-PATH</em>:包含了前缀的通告已经听过的那些AS</li>
<li>Providing the critical link between the inter-AS and intra-AS
routing protocols, the NEXT-HOP attribute has a subtle but important
use. <strong>The NEXT-HOP is the router interface that begins the
AS-PATH.</strong></li>
</ul>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/BGP_routing.png" style="zoom:50%;" /></p>
<h2 id="chapter-5-the-link-layer-links-access-networks-and-lans">Chapter
5 The Link Layer: Links, Access Networks, and LANs</h2>
<h3 id="introduction-to-the-link-layer">5.1 Introduction to the Link
Layer</h3>
<ul>
<li><strong>node</strong>: any device that runs a link-layer
protocol</li>
<li><strong>links:</strong>the communication channels that connect
adjacent nodes along the communication path</li>
<li><strong>link-layer frame</strong>: link-layer data transmission
format</li>
</ul>
<h4 id="the-services-provided-by-the-link-layer">The Services Provided
by the Link Layer</h4>
<ol type="1">
<li><em>Framing</em>(成帧)</li>
<li><em>Link access</em>(链路接入)</li>
<li><em>Reliable delivery.</em></li>
<li><em>Error detection and correction</em></li>
</ol>
<h4 id="where-is-the-link-layer-implemented">Where Is the Link Layer
Implemented?</h4>
<p><strong>network adapter</strong> also named <strong>network interface
card (NIC)</strong></p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_2.png" style="zoom:50%;" /></p>
<h3 id="error-detection-and--correction-techniques">5.2 Error-Detection
and -Correction Techniques</h3>
<p>use <strong>error-detection and -correction bits(EDC)</strong> to
detect and correct error bits</p>
<p>Even with the use of error-detection bits there still may be
<strong>undetected bit errors</strong></p>
<h4 id="parity-checks">Parity Checks</h4>
<p>奇偶校验只需要查看加上检验比特(奇偶校验位)的1 是奇数还是偶数</p>
<p>二维奇偶校验:</p>
<p>对每一行每一列都进行奇偶校验,然后对列行奇偶校验位进行奇偶校验,
就校验可以检测和纠正单个比特错误,可以检测但是不能纠正两个比特的任意错误组合</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_5.png" style="zoom:50%;" /></p>
<p>The ability of the receiver to both detect and correct errors is
known as <strong>forward error correction (FEC前向纠错)</strong>.</p>
<h4 id="checksumming-methods">Checksumming Methods</h4>
<p>和UDP/TCP中的类似</p>
<h4 id="cyclic-redundancy-check-crc">Cyclic Redundancy Check (CRC)</h4>
<p>also named <strong>polynomial codes</strong>(多项式编码)</p>
<ol type="1">
<li><p>确定多项式 例如 x3+x2+1 = 1101</p></li>
<li><p>在目标码后加上多项式码长度-1 的0</p></li>
<li><p>做模2除法(除的过程不是减是异或)</p></li>
</ol>
<p>把最后的余数添加到原码的末尾,在接收端使用相同多项式除看余数是否是0</p>
<h3 id="multiple-access-links-and-protocols">5.3 Multiple Access Links
and Protocols</h3>
<ul>
<li><strong>point-to-point link</strong>: consists of a single sender at
one end of the link and a single receiver at the other end of the
link</li>
<li><strong>broadcast link</strong>: enables a single source node to
send a copy of a packet to a subset of the other network nodes</li>
</ul>
<ol type="1">
<li>channel partitioning protocols 信道划分协议</li>
<li>random access protocols 随机访问协议</li>
<li>taking-turns protocols 轮流协议</li>
</ol>
<p>a multiple access protocol for a broadcast channel of rate R bits per
second should have the following desirable characteristics:</p>
<ol type="1">
<li><p>当仅有一个节点发送数据时,具有R bps的吞吐量</p></li>
<li><p>当M给节点发送时,每个结点吞吐量为 R/M bps的平均传输速率</p></li>
<li><p>协议是分散的,不会因为某个主节点故障而使整个系统崩溃</p>
<p>no special node to coordinate transmissions</p>
<p>no synchronization of clocks, slots</p></li>
<li><p>协议是简单的,使实现不昂贵</p></li>
</ol>
<h4 id="channel-partitioning-protocols">Channel Partitioning
Protocols</h4>
<ul>
<li><p>time-division multiplexing (TDM): divides time into time frames
and further divides each time frame into N time slots(时隙)
仅有一个节点他的速度任然是R/N的速度</p></li>
<li><p>frequency-division multiplexing (FDM): 将R bps
信道划分为不同的频段, 具有TDM的缺点</p></li>
</ul>
<h4 id="random-access-protocols">Random Access Protocols</h4>
<ul>
<li><p><strong>Slotted ALOHA (时隙 ALOHA)</strong>:</p>
<p>有如下假设:</p>
<ul>
<li>All frames consist of exactly L bits.</li>
<li>Time is divided into slots of size L/R seconds (that is, a slot
equals the time to transmit one frame).</li>
<li>Nodes start to transmit frames only at the beginnings of slots.</li>
<li>The nodes are synchronized so that each node knows when the slots
begin.</li>
<li>If two or more frames collide in a slot, then all the nodes detect
the collision event before the slot ends.</li>
</ul>
<p>p 是一个0-1的概率, 有如下操作:</p>
<ul>
<li>当节点要发送一个新帧时,需要在下一个时隙开始并在该时隙传输整个帧</li>
<li>如果没有碰撞则成功传输,不需要考虑重传</li>
<li>如果有碰撞,该结点在时隙结束之前检测到碰撞,之后以p在之后的每一杠时隙重传,直到成功</li>
</ul>
<p>此协议需要时钟同步,但是当只有一个结点时,效率是R</p>
<p>此协议效率定义为:有大量活跃结点发送大量帧时,长期运行中成功时隙的份额</p>
<p>在p的概率下 N个结点的效率为<span
class="math inline">\(Np(1-p)^{N-1}\)</span> N趋于无穷时有极限1/e =
0.37</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_10.png" style="zoom:50%;" /></p></li>
<li><p>ALOHA</p>
<p>时隙ALOHA的无时钟同步版本, 效率降低一半</p></li>
<li><p>Carrier Sense Multiple Access (CSMA 载波监听多路访问)</p>
<p>规则:</p>
<ol type="1">
<li><em>Listen before speaking</em>, this is called <strong>carrier
sensing</strong></li>
<li><em>If someone else begins talking at the same time, stop
talking</em>, this is called <strong>collision detection</strong></li>
</ol>
<p>These two rules are embodied in the family of <strong>carrier sense
multiple access(CSMA)</strong> and <strong>CSMA with collision detection
(CSMA/CD)</strong> protocols</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_12.png" style="zoom:50%;" /></p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_13.png" style="zoom:50%;" /></p>
<p>CSMA/CD 的运行</p>
<ol type="1">
<li>The adapter obtains a datagram from the network layer, prepares a
link-layer frame, and puts the frame adapter buffer.</li>
<li>If the adapter senses that the channel is idle (that is, there is no
signal energy entering the adapter from the channel
即在96比特时间内没有检测到信道上有信号), it starts to transmit the
frame. If, on the other hand, the adapter senses that the channel is
busy, it waits until it senses no signal energy and then starts to
transmit the frame.</li>
<li>While transmitting, the adapter monitors for the presence of signal
energy coming from other adapters using the broadcast channel.</li>
<li>If the adapter transmits the entire frame without detecting signal
energy from other adapters, the adapter is finished with the frame. If,
on the other hand, the adapter detects signal energy from other adapters
while transmitting, it aborts the transmission (that is, it stops
transmitting its frame).</li>
<li>After aborting, the adapter waits a random amount of time and then
returns to step 2.</li>
</ol>
<p>选择随机回退时间算法:</p>
<p><strong>binary exponential
backoff(二进制指数后退)</strong>algorithm</p>
<p>经历n次碰撞之后,结点随机的从<span
class="math inline">\(\{0,1,2,...,2^n-1\}\)</span>选择一个值作为回退时间</p></li>
</ul>
<h4 id="taking-turns-protocols">Taking-Turns Protocols</h4>
<p>Recall that two desirable properties of a multiple access protocol
are (1) when only one node is active, the active node has a throughput
of R bps, and (2) when M nodes are active, then each active node has a
throughput of nearly R/M bps. The ALOHA and CSMA protocols have this
first property but not the second.</p>
<ul>
<li><strong>polling protocol(轮询协议)</strong>:
在一个主结点的控制下轮询各个结点</li>
<li><strong>token-passing
protocol(令牌传递协议)</strong>:结点构成一个环,将令牌传递,有令牌的发送,结束后传递给下一个</li>
</ul>
<p>具有单点失效性</p>
<h3 id="switched-local-area-networks">5.4 Switched Local Area
Networks</h3>
<h4 id="link-layer-addressing-and-arp">Link-Layer Addressing and
ARP</h4>
<ul>
<li><p><strong>MAC(LAN address, a physical address)</strong>: 48 bits,
FF-FF-FF-FF-FF-FF <strong>broadcast address</strong></p></li>
<li><p><strong>Address Resolution Protocol (ARP)</strong>:</p>
<p>ARP 维护一个ARP表</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_18.png" style="zoom:50%;" /></p>
<p>表中没有所需要的项时,就会发送一个ARP分组并向子网广播获取对方的MAC地址,当需要发送到子网以外时,需要先获取网关路由器的MAC地址,然后一步步转发出去</p></li>
</ul>
<h4 id="ethernet">Ethernet</h4>
<ul>
<li>hub(集线器): 比特级复制数据,可以达到广播的目的</li>
<li>switch(交换机):存储转发功能,且无碰撞(因为有缓存)</li>
</ul>
<p>结构:</p>
<p><img src="/assets/Note/Compute-Networking-A-Top-Down-Approach-6th/5_20.png" style="zoom:50%;" /></p>
<p>以太网技术提供不可靠服务,接收方会执行CRC校验,失败则丢弃,但不对发送方产生任何的反馈信息</p>
<h4 id="link-layer-switches">Link-Layer Switches</h4>
<ul>
<li><strong>Filtering</strong>: determines whether a frame should be
forwarded to some interface or should just be dropped.</li>
<li><strong>Forwarding</strong>: determines the interfaces to which a
frame should be directed, and then moves the frame to those
interfaces.</li>
</ul>
<p>一个目的MAC通过一个接口x到达交换机有3种情况:</p>
<ol type="1">
<li>没有此目的MAC的表项则广播</li>
<li>此表项和x已经关联,丢弃</li>
<li>不等于x的y接口是此目的MAC 则转发</li>
</ol>
<p>交换机是自学习的,即插即用,双工设备</p>
<ol type="1">
<li>初始交换机为空</li>
<li>对每个接口接收到的帧,存储 MAC, 接口, 时间信息</li>
<li>在老化期(aging time)之后没有收到该地址作为源的帧删除</li>
</ol>
<p>交换机的优点:</p>
<ol type="1">
<li><em>Elimination of collisions</em></li>
<li><em>Heterogeneous links</em>(异质的链路)</li>
<li><em>Management</em></li>
</ol>
<p>交换机和路由器比较:</p>
<ul>
<li><p>交换机:
即插即用、高转发过滤速率、没有提供广播风暴保护措施</p></li>
<li><p>路由器：一般不会死循环（TTL）、广播风暴有有防火墙保护，非即插即用，处理时间长</p></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Computer-Network/" rel="tag"># Computer Network</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/03/12/2020-03-12-Matplotlib-DirectlyOutput-Img/" rel="prev" title="Matplotlib 图像直接导出为 ndarray">
                  <i class="fa fa-chevron-left"></i> Matplotlib 图像直接导出为 ndarray
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/02/28/2020-02-28-Operating-System-Internals-and-Design-Principles-8th-Note/" rel="next" title="操作系统精髓与设计原理 第8版 阅读笔记">
                  操作系统精髓与设计原理 第8版 阅读笔记 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2018 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Wei-Jun Lin</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">133k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">8:05</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/weijun-lin" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
